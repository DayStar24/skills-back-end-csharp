<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Studio: User Signup Continued :: Unit 3: Back-End C# Skill Track</title>

        <link rel="stylesheet" href="https://education.launchcode.org/skills-back-end-csharp/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://education.launchcode.org/skills-back-end-csharp/css/highlight.launchcode.css">
        <link rel="stylesheet" href="https://education.launchcode.org/skills-back-end-csharp/css/main.css">
        <link rel="stylesheet" href="https://djwbyvgln9kts.cloudfront.net/launch_ed_style/custom.css">
    </head>
    <body id='page-studio-user-signup-continued'>

        <header class="navbar navbar-default navbar-fixed-top">

            <ul class="nav navbar-nav">

                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle glyphicon glyphicon-menu-hamburger" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"></a>
                        <ul class="dropdown-menu">
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/classes/">
                                        Classes
                                    </a>
                                </li>
                                                            <li class="active lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/studios/">
                                        Studios
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/assignments/">
                                        Assignments
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/videos/">
                                        Videos
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/csharp4python/">
                                        C# for Python Programmers
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/glossary/">
                                        Glossary
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/issues/">
                                        Reporting Issues
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/skills-back-end-csharp/about/">
                                        About this Unit
                                    </a>
                                </li>
                                                        <li role="separator" class="divider"></li>
                            <li>
                                <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                            </li>
                        </ul>
                    </li>

                
            </ul>

            <div>
                <a class="navbar-brand site-title navbar-center" href="https://education.launchcode.org/skills-back-end-csharp/">
                    <h1>Unit 3: Back-End C# Skill Track</h1>
                </a>
            </div>

            <div class="nav navbar-nav navbar-right">
                <a class="navbar-brand dabomb" href="https://education.launchcode.org/skills-back-end-csharp/"></a>
            </div>

        </header>

        <!-- Search Modal -->
        <div id="modalSearch" class="modal fade" role="dialog">
           <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal">&times;</button>
                   <h4 class="modal-title">Search Unit 3: Back-End C# Skill Track</h4>
                </div>
                <div class="modal-body">
                    <script>
                      (function() {
                        var cx = "014657181352409571810:-32orsjtyl4";
                        var gcse = document.createElement('script');
                        gcse.type = 'text/javascript';
                        gcse.async = true;
                        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                        var s = document.getElementsByTagName('script')[0];
                        s.parentNode.insertBefore(gcse, s);
                      })();
                    </script>
                    <gcse:search></gcse:search>
                </div>
                <div class="modal-footer">
                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

           </div>
        </div>

        <main class="container-fluid">
            <div class="row">

                <section id="content" class="col-sm-offset-2 col-sm-8">
                                        <h1>Studio: User Signup Continued</h1>
                    <p>We'll build on the <a href="../user-signup/">User Signup</a> studio from last class, adding in a ViewModel and validation.</p>
<h2 id="getting-started">Getting Started</h2>
<p>Open up your <code>UserSignup</code> application from last time, and create a <code>ViewModels/</code> folder at the same level as <code>Models/</code>. Within this folder, create a <code>AddUserViewModel</code>.</p>
<p>Add some properties to this new ViewModel. Which ones, you ask? Well, the ViewModel will be used in the view and actions that display and process the form to add a user, so think about what these properties should be. You'll need the properties necessary to create a new user, but you'll need more than that for the form.</p>
<h2 id="add-validation-attributes">Add Validation Attributes</h2>
<p>Add <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/validation#validation-attributes" target="_blank">validation attributes</a> to the properties in the ViewModel.</p>
<p>The validation attributes should ensure these conditions are satisfied:</p>
<ul>
<li>Username, password, and verify are required</li>
<li>Email is optional</li>
<li>If provided, the email has the format of a valid email address</li>
<li>The password and verify fields match</li>
<li>The password is at least 6 characters long</li>
<li>
<p>If password and verify fields do not match, display the message: &quot;Passwords do not match&quot;</p>
<p><strong>How to do this:</strong> You will have a property named <code>Verify</code> (or something similar). For its validation, it should match the <code>Password</code> property, so use the validation attribute <code>[Compare("Password")]</code>.</p>
</li>
<li>
<p>The password and verify fields are rendered with <code>type="password"</code> in the form markup.</p>
<p><strong>How to do this:</strong> Add the attribute <code>[DataType(DataType.Password)]</code> to each property.</p>
</li>
</ul>
<p>Before leaving the ViewModel, add a <code>[Display(Name = "...")]</code> attribute to the verify property to ensure that the label that's displayed is &quot;Verify Password&quot;.</p>
<h2 id="using-the-viewmodel-in-the-controller">Using the ViewModel in the Controller</h2>
<p>Within each of the <code>Add</code> actions in the <code>UserController</code>, use the new ViewModel class to both pass data into, and receive data from the form. Upon form submission, you'll want to check that the model is valid using <code>ModelState.IsValid</code>.</p>
<p>If you're unsure about how to do this, revisit the <a href="../../videos/intro-to-mvc-viewmodels-1/">lesson on ViewModels</a>, along with the source code linked on that video lesson page.</p>
<aside class="aside-warning">
<p>If you did any of the Bonus Missions in the previous studio, you'll be tearing out some of that code, since we'll now have the framework handle validation. Don't worry, it'll be worth it!</p>
</aside>
<h2 id="using-the-viewmodel-in-the-view">Using the ViewModel in the View</h2>
<p>Refactor <code>Add.cshtml</code> to use <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms" target="_blank">tag helpers</a> to render the form inputs. Also use the tag helpers for error message display, either for the entire form in a <code>div</code> with:</p>
<pre><code class="language-html">&lt;div asp-validation-summary="All"&gt;&lt;/div&gt;</code></pre>
<p>Or on a per-field basis with:</p>
<pre><code class="language-html">&lt;span asp-validation-for="PROPERTY"&gt;&lt;/span&gt;</code></pre>
<p>(where PROPERTY is a placeholder for the given property).</p>
<p>Don't forget to declare the ViewModel at the top of the view using the syntax:</p>
<pre><code class="language-nohighlight">@model UserSignup.ViewModels.AddUserViewModel</code></pre>
<p>Or, equivalently:</p>
<pre><code class="language-nohighlight">@using UserSignup.ViewModels
@model AddUserViewModel</code></pre>
<h2 id="test-test-test">Test, Test, Test!</h2>
<p>You made a lot of changes! Be sure to throughly test them to make sure everything works as expected.</p>
                                    </section>

            </div>
        </main>

        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="https://education.launchcode.org/skills-back-end-csharp/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://education.launchcode.org/skills-back-end-csharp/js/highlight.pack.js"></script>
        <script type="text/javascript" src="https://education.launchcode.org/skills-back-end-csharp/js/libgif.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');

                // Syntax highlighting
                hljs.configure({ displayLabels: true });
                hljs.initHighlightingOnLoad();
            });
        </script>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', "UA-78748330-6", 'auto');
            ga('send', 'pageview');

        </script>

    </body>
</html>
